<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrinho e pagamento</title>
    <link rel="icon" href="./img/iconsite.webp" type="image/gif" sizes="16x16">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <style>

    img {
      width: 300px;
    }

    #produtos{
    display: flex;
    }

    .adiciona {
      font-size: 25px;
      color: chocolate;
      padding-right: 20px;
    }

    #hrcarrinho {
      width: 700px;
      background-color: black;
    }

    #totalcompracarrinho {
      font-size: 25px;
      color: black;
    }

    #separarcarrinho {
      width: 700px;
      background-color: black;
    }

    @media (max-width: 1220px) {
      #produtos {
        display: inline-block;
      }
    }
    @media (max-width: 719px) {
      #separarcarrinho {
        width: 100%;
        background-color: black;
      }
    }
    </style>
  </head>
<body>
    
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: chocolate;">
      <a class="navbar-brand" href="index.html">
        <img src="./img/engrenagem-menu.webp" alt="logo" style="width: 50px; height: 40px;">
      </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav mx-auto">
            <li class="nav-item active">
              <a class="nav-link" href="index.html">Início<span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="faleconosco.html">Fale Conosco</a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="cadastro.html">Cadastro</a>
            </li>
          </ul>
        </div>
      </nav>


    <center>

      <h2 class="mt-3 mb-5">Produtos:</h2>
      <div id="produtos" class="justify-content-center"></div>
      
      <h2 class="mt-5">Carrinho:</h2>
      <div id="carrinhos"></div>

      <hr id="separarcarrinho">
      
    </center>


      <h2 class="text-center mt-4">Metodo de pagamento cartão de credito</h2>

      <form style="margin-top: 8%;">
        <div class="form-group col-md-3 mx-auto">
          <center>
          <label for="email" id="campoemail">Email</label>
          </center>
          <input type="email" class="form-control text-center" id="email" aria-describedby="emailHelp" placeholder="Digite seu email" required>
        </div>
        <div class="form-group col-md-3 mx-auto">
          <center>
          <label for="endereco" id="campoendereco">Endereço</label>
          </center>
          <input type="text" class="form-control text-center" id="endereco" placeholder="Digite Estado / Cidade / Bairro..." required>
        </div>

        <div class="form-group col-md-3 mx-auto">
            <center>
            <label for="name" id="camponame">Nome Completo</label>
            </center>
            <input type="text" class="form-control text-center" id="name" aria-describedby="textHelp" placeholder="Digite seu nome completo" required>
        </div>

        <center>
        <div>
            <img src="./img/bandeiracartao.webp" alt="Bandeiras Cartão">
        </div>
        </center>

        <div class="form-group col-md-3 mx-auto">
            <center>
            <label for="cardnumber" id="camponumerocard">Número do cartão</label>
            </center>
            <input type="text" class="form-control text-center" id="cardnumber" aria-describedby="textHelp" placeholder="Digite o número do cartão" minlength="15" maxlength="16" required>
        </div>

        <div class="form-group col-md-3 mx-auto">
            <center>
            <label for="vencimentocard" id="campovencimentocard">Data validade</label>
            </center>
            <input type="text" class="form-control text-center" id="vencimentocard" aria-describedby="textHelp" placeholder="Digite a validade Ex: 03/24" minlength="5" maxlength="5" required>
        </div>

        <div class="form-group col-md-3 mx-auto">
            <center>
            <label for="cardcvv" id="campocvvcard">Digite o CVV</label>
            </center>
            <input type="text" class="form-control text-center" id="cardcvv" aria-describedby="textHelp" placeholder="Digite o CVV do cartão" minlength="3" maxlength="3" required>
        </div>

        <center>
        <div id="confirmacaovalor">
          
        </div>
        </center>

          <center>
            <small id="emailHelp" class="form-text text-muted text-center">Fique tranquilo, não compartilhamos seus dados com ninguém.</small>
          </center>

          <br>

        <div class="form-group form-check text-center">
          <input type="checkbox" class="form-check-input" id="checkconcord" required>
          <label class="form-check-label" for="checkconcord">Concordo com a compra</label>
        </div>
        <center>
        <button type="submit" class="btn btn-primary" onclick="compra()">Confirmar Compra</button>
        </center>

    </form>

    <div id="rodape" class="mt-5">
      <h2 id="rodapetext">Desenvolvido por Gabriel</h2>
    </div>

    <script>
        
        let itens = [ 
            {
                id: 0, 
                nome: "Maquina de solda",
                img: "./img/maquinasolda-produto.webp",
                quantidade: 0,
                valor: 627.35 
            }, 
            {
                id: 1,
                nome: "Esmerilhadeira",
                img: "./img/esmerilhadeira-produto.webp",
                quantidade: 0,
                valor: 284.62
            },
            {
                id: 2, 
                nome: "Lixadeira",
                img: "./img/lixadeira-produto.webp",
                quantidade: 0,
                valor: 361.56
            },
            {
                id: 3, 
                nome: "Compressor",
                img: "./img/compressor-produto.webp",
                quantidade: 0,
                valor: 2409.28
            }
        ];

            
            function carregarLoja() {
                let loja = document.querySelector("#produtos")
                
                itens.forEach((i) => {
                  loja.innerHTML += `
                  
                    <div>
                        <img src="${i.img}">
                        <p>${i.nome}</p>
                        <p>R$ ${i.valor}</p>
                        <a class="adiciona" key="${i.id}" href="#">Adicionar ao carrinho</a>
                    </div>
                  `;
                })                

            }
            carregarLoja();

            
            carregarCarrinho = () => {
                let itensLoja = document.querySelector("#carrinhos");
                let subTotal = 0;
                let total = 0;

                itensLoja.innerHTML = "";

                itens.forEach((i) => {
                    if(i.quantidade > 0) {
                        subTotal = i.valor * i.quantidade;
                        total += subTotal;

                        itensLoja.innerHTML += `
                            <div>
                                <p>  ${i.nome} 
                                    | Preço: R$ ${i.valor} 
                                    |Quantidade: ${i.quantidade} 
                                    | Sub-total R$ ${subTotal.toFixed(2)}</p>
                                <hr id="hrcarrinho">
                            </div>                    
                        `;
                    }
                })

                itensLoja.innerHTML += `
                <div>
                    <p id="totalcompracarrinho">Total da compra: <b>R$ ${total.toFixed(2)}</b></p>
                </div>                
                `;
            }

            
            let carrinho = document.querySelectorAll(".adiciona");

            for (i in itens) {
                carrinho[i].addEventListener('click', function() {
                    let key = this.getAttribute('key');
                    itens[key].quantidade++;                    
                    carregarCarrinho();
                })
            }


    </script>

    <script>
        function compra() {
            var email = document.getElementById("email");
            var endereco = document.getElementById("endereco");
            var nome = document.getElementById("name");
            var cardnumber = document.getElementById("cardnumber");
            var vencimentocard = document.getElementById("vencimentocard");
            var cardcvv = document.getElementById("cardcvv");
            let checkconcord = document.getElementById("checkconcord")

            if (email.value == "") {
            alert("Email não informado");
            email.focus();
            return;
           }

           if (endereco.value == "") {
            alert("Endereço não informado");
            endereco.focus();
            return;
           }

           if (nome.value == "") {
            alert("Nome não informado");
            nome.focus();
            return;
           }

           if (cardnumber.value == "") {
            alert("Digite o numero do cartão");
            cardnumber.focus();
            return;
           }
           
           if (vencimentocard.value == "") {
            alert("Digite a data de validade");
            vencimentocard.focus();
            return;
           }

           if (cardcvv.value == "") {
            alert("Digite o CVV do cartão");
            cardcvv.focus();
            return;
           }

           if(checkconcord.checked) {
          alert("Compra concluída com Sucesso, Assim que confirmarmos o pagamento enviaremos por email os detalhes do pedido e o codigo de rastreio. Obrigado pela compra!");
        }
        else
        alert("Você deve concordar com a compra para continuar.")


        }
    </script>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>
</body>
</html>